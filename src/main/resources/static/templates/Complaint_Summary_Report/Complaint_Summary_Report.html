<style>
.table-bordered tr th, .table-bordered tr td, .table-bordered tr {
    border: 1px solid #ccc !important;
}
.orange { background-color: #008B8B; }
.orange th { color: #fff; }
.navbar {
    background-color: #008B8B;
    padding: 10px 0;
    color: #fff;
    text-align: center;
    text-decoration: none;
}
.btn_search {
    background-color: #008B8B;
    border: 1px solid #008B8B;
    color: white;
}
.center-button {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}
</style>

<div class="container">
    <div class="row page-title-div">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h2 class="title" style="text-align:center;">Complaint Summary Report</h2>
        </div>
         <div class="col-md-2">
                        <button type="button" class="btn_serach btn-sm" id="success" style="background: #008B8B; border: 1px solid #008B8B; color:white;" ng-click="vm.export()">Export</button>
                    </div>
    </div>
<br>
      <div class="row">
        <div class="col-md-6 col-xs-12">
            <div class="form-group">
                <label for="status">Select Complaint Status:</label>
                <select class="form-control" ng-model="vm.selectedStatus" id="status" required ng-change="vm.generateComplaintSummaryReport()">
                    <option value="" selected>Select Status</option>
                    <option value="1">Open</option>
                    <option value="2">Allocate</option>
                    <option value="3">Inprocess</option>
                    <option value="4">Closed</option>
                </select>
            </div>
        </div>
        <div class="col-md-6 col-xs-12">
            <div class="form-group">
                <label for="date-filter">Select Date Filter:</label>
                <select class="form-control" ng-model="vm.selectedDateFilter" id="date-filter" ng-change="vm.generateComplaintSummaryReport()">
                    <option value="" selected>Select Filter</option>
                    <option value="day">Day Wise</option>
                    <option value="date">Date Wise</option>
                </select>
            </div>
        </div>
        <div class="col-md-6 col-xs-12" ng-if="vm.selectedDateFilter === 'day'">
            <div class="form-group">
                <label for="day-date">Select Date:</label>
                <input type="date" class="form-control" ng-model="vm.selectedDayDate" id="day-date" required ng-change="vm.generateComplaintSummaryReport()">
            </div>
        </div>
        <div class="col-md-6 col-xs-12" ng-if="vm.selectedDateFilter === 'date'">
            <div class="form-group">
                <label for="from-date">From Date:</label>
                <input type="date" class="form-control" ng-model="vm.selectedFromDate" id="from-date" required ng-change="vm.generateComplaintSummaryReport()">
            </div>
        </div>
        <div class="col-md-6 col-xs-12" ng-if="vm.selectedDateFilter === 'date'">
            <div class="form-group">
                <label for="to-date">To Date:</label>
                <input type="date" class="form-control" ng-model="vm.selectedToDate" id="to-date" required ng-change="vm.generateComplaintSummaryReport()">
            </div>
        </div>
    </div>
    <div class="panel-body table-responsive">
        <table datatable="ng" id="complaintSummaryReport" class="table table-bordered">
            <thead class="orange">
                <tr>
                    <th>SrNo</th>
                    <th>Complaint No</th>
                    <th>Machine Name</th>
                    <th>Complaint Date</th>
                    <th>Status</th>
                    <th>Assigned Engineer</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-if="vm.complaintSummary.length === 0">
                    <td colspan="6" class="text-center">No data available.</td>
                </tr>
                <tr ng-repeat="complaint in vm.complaintSummary">
                    <td>{{$index + 1}}</td>
                    <td>{{complaint.ticketNo}}</td>
                    <td>{{complaint.assetInventory.machine}} - {{complaint.assetInventory.equipmentId}}</td>
                    <td>{{complaint.complaintDate | date:'dd-MM-yyyy'}}</td>
                    <td>
                        <span ng-switch="complaint.status">
                            <span ng-switch-when="1">Open</span>
                            <span ng-switch-when="2">Allocate</span>
                            <span ng-switch-when="3">In-Process</span>
                            <span ng-switch-when="4">Closed</span>
                        </span>
                    </td>
                    <td>{{complaint.allocateTo.firstName}} {{complaint.allocateTo.lastName}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
