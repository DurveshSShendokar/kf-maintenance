<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <title>Renata - Add User</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/bootstrap.css">
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.js"></script>
</head> -->
<style type="text/css">
  .mainform{margin-top: 3%;}
  .mainform form{margin-top: 3%;    margin-left: -14%;}
  .btn-oranage{background-color: #008B8B ;color:#fff;}
  .oranage{background-color:#008B8B}
  .margin-bt{margin:1% 0;}
  .header-name span{font-size:25px;}
  
  
  .inputdemoErrors .inputErrorsApp {
  min-height: 48px; }

 

.form-border {
    border: 2px solid #ccc;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
    
}

.inputdemoErrors md-input-container > p {
  font-size: 0.8em;
  text-align: left;
  width: 100%; }
</style>
<body>

<div class="container mainform " >
	<div 	ng-show="addUsers">
  <h4 class="text-center"><b>Add User</b></h4>
  			<!--  action="#" method="post" -->
    <div class="row form-border">
      <div class="col-sm-6">
        <div class="form-group">
      <div class="row">
      <div class="col-sm-5 text-right">
      <label for="user name">First Name:<span style="color: red;">*</span></label></div>
      <div class="col-sm-7">
      <input type="text" class="form-control"  ng-model="user.firstName" id="firstname" placeholder="Enter First Name" name="firstname">
      </div>
	  <span style="color:red" ng-if="FNameErr">First Name is mandetory</span>
    </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="form-group">
      <div class="row">
      <div class="col-sm-5 text-right">
      <label for="Last name">Last Name:<span style="color: red;">*</span></label></div>
      <div class="col-sm-7">
      <input type="text" class="form-control" id="lastname" ng-model="user.lastName" placeholder="Enter Last Name" name="lastname">
    </div>
	<span style="color:red" ng-if="lNameErr">	Last Name is mandetory</span>
  </div>
  </div>
</div>
   
  <div class="row">
      <div class="col-sm-6">
        <div class="form-group">
		      <div class="row">
			      <div class="col-sm-5 text-right">
			     	 	<label for="Email Id">User Name:<span style="color: red;">*</span></label>
			      </div>
			      <div class="col-sm-7">
			      		<input type="text" class="form-control"  ng-model="user.userName" placeholder="Enter User Name" >
			      </div>
				  <span style="color:red"ng-if="uNameErr">User Name is mandetory</span>
			      
		      </div>
    	</div>
  	</div>
	<div class="col-sm-6">
	       <div class="form-group">
		      <div class="row">
			      <div class="col-sm-5 text-right">
			     	 	<label for="Email Id">Email Id:</label>
			      </div>
			      <div class="col-sm-7">
			      		<input type="text" class="form-control"  ng-model="user.emailId" placeholder="Enter Email Id" >
			      </div>
			     
			      
		      </div>
	   	</div>
	 	</div>

  </div>  
  <div class="row">
      <div class="col-sm-6">
        <div class="form-group">
      <div class="row">
      <div class="col-sm-5 text-right">
      <label for="Password">Password:<span style="color: red;">*</span></label></div>
      <div class="col-sm-7">
      <input type="password" class="form-control"  ng-model="user.password" placeholder="Enter Password" >
      </div>
	  <span style="color:red"ng-if="pswordErr">User Name is mandetory</span>
    </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="form-group">
      <div class="row">
      <div class="col-sm-5 text-right">
      <label for="Contact Number">Contact No.:<span style="color: red;">*</span></label></div>
      <div class="col-sm-7">
      <input type="text" class="form-control" id="contactno" minlength="10" maxlength="10"  ng-model="user.contactNo" placeholder="Enter Contact Number" name="contactno">
    </div>
	<span style="color:red"ng-if="contactNoErr">	Contact 	No is mandetory</span>
  </div>
  </div>
</div>
  </div> 
  
   <div class="row">
       <div class="col-sm-6">
         <div class="form-group">
       <div class="row">
       <div class="col-sm-5 text-right">
       <label for="Password">		Department:<span style="color: red;">*</span></label></div>
       <div class="col-sm-7">
		
		<select 			ng-model="user.department.departmentId"	ng-options="department.departmentId as 	department.departmentName for department in vm.departments" 		class="form-control" required >
			 <option value="">Select Department :</option>

		</select>
       </div>
	   <span style="color:red"ng-if="departErr">		   Department 	No is mandetory</span>
     </div>
     </div>
   </div>
   <div class="col-sm-6">
     <div class="form-group">
       <div class="row">
       <div class="col-sm-5 text-right">
       <label for="Contact Number">Role :<span style="color: red;">*</span></label></div>
       <div class="col-sm-7">
		
		<select 						ng-model="user.role.role_id "	ng-options="role.role_id as 	role.roleName for role in vm.roles"		class="form-control" required >
		 <option value="">Select 			Role :</option>
		
		</select>     </div>
		<span style="color:red"ng-if="roleErr">		   Role 	No is mandetory</span>
   </div>
   </div>
 </div>
   </div> 


   
  <div class="row">
    <!--  <div class="col-sm-6">
        <div class="form-group">
      <div class="row">
      <div class="col-sm-5 text-right">
      <label for="user name">Employee Id:<span style="color: red;">*</span></label></div>
      <div class="col-sm-7">
      	<input type="text" class="form-control"  ng-disabled="disableEmployeeId" ng-model="user.empId" placeholder="Enter Employee Id" >
      	<label ng-if="error">*		Employee  Id already exits</label>
      </div>
	  <span style="color:red"ng-if="uNameErr">	  Employee is mandetory</span>
    </div>
    </div>
  </div>-->
  <div class="col-sm-6">
  	<div class="col-sm-5 form-group text-right">
     
    </div>
    <div class="col-sm-7 form-group text-right">
     <div style="width:50%;float:left;margin-right: 2%;">
      <button class="btn btn-success" style="width:100%;" ng-if="!showEditButton" ng-click="vm.createUser(user)">Submit</button>   
      <button class="btn btn-success" style="width:100%;" ng-if="showEditButton" ng-click="vm.editUserInformation(user)">Submit</button>   
   		</div>
   		<div style="width:46%;float:left;">
   			<!-- <button class="btn btn-danger" style="width:100%;" ng-click="vm.addNewUser()">Clear</button>  -->  
   		 <button type="button" class="btn-oranage" ng-click="vm.cancel()">Cancel</button>
   		</div>
    </div>
     </div>
  </div>
  </div>  
  </div>
 <br>
 
 
 
 
 
 <div ng-show="showLabAssignForm " class="form-container" style="margin-top: 30px; padding: 20px; border: 1px solid #ccc;">
     <h4>Assign User to Lab</h4>
     
	 <div class="row">
	     <!-- User Dropdown -->
	     <div class="col-md-4">
	         <div class="form-group mb-2">
	             <label for="userSelect">User:</label>
	             <select id="userSelect" class="form-control form-control-sm" 
	                     ng-model="labAssignment.user"
	                     ng-options="user as user.firstName + ' ' + user.lastName for user in vm.users"
	                     ng-disabled="true">
	             </select>
	         </div>
	     </div>

	     <!-- Lab Dropdown -->
	     <div class="col-md-4">
	         <div class="form-group mb-2">
	             <label for="labSelect">Lab:</label>
	             <select id="labSelect" class="form-control form-control-sm"
	                     ng-model="labAssignment.lab"
	                     ng-options="lab as lab.labName for lab in vm.labs">
	                 <option value="">-- Select Lab --</option>
	             </select>
	         </div>
	     </div>
	 </div>

	 <button class="btn btn-primary" ng-click="vm.assignLab()">Assign</button>
	 <button class="btn btn-secondary" style="margin-left: 15px;" ng-click="vm.cancelLabAssign()">Cancel</button>

	 <br>
	 <br>
	 
	 
	 <!-- Assigned Labs Table -->
	 <div class="container" style="margin-top: 20px;">
	    
	     <div class="table-responsive">
	         <table class="table table-bordered" style="width:90%; margin: 0 auto;">
	             <thead class="oranage">
	                 <tr>
	                     <th style="width: 10%;">SrNo</th>
	                     <th style="width: 90%;">Lab Name</th>
	                 </tr>
	             </thead>
	             <tbody>
	                 <tr ng-repeat="lab in vm.assignedLabs track by $index">
	                     <td>{{$index + 1}}</td>
	                     <td>{{lab.labName}}</td>
	                 </tr>
	                 <tr ng-if="vm.assignedLabs.length === 0">
	                     <td colspan="2" class="text-center text-muted">No labs assigned.</td>
	                 </tr>
	             </tbody>
	         </table>
	     </div>
	 </div>
</div>

 
 
 <br>
 <h1> Add User </h1>
 <div class="container">
   <!-- Right-Aligned Add Button -->
   
   <div style="text-align: right; margin-bottom: 15px;">
	<button class="btn btn-success" ng-if="!showEditButton && !showLabAssignForm" style="width:100px;" ng-click="vm.add()">Add</button>
   </div>

   <!-- Users Table -->
   <table class="table table-bordered" datatable="ng" style="width: 60%; margin: 0 auto;">
     <thead>
       <tr class="oranage">
         <th>#</th>
         <th>Name</th>
         <th>User Name</th>
         <th>Contact No.</th>
      <!--   <th>Employee Id</th>-->
         <th>Role</th>
         <th>Department</th>
         <th>Status</th>
         <th>Action</th>
       </tr>
     </thead>
     <tbody>
       <tr ng-repeat="arr in vm.users track by $index">
         <td>{{$index + 1}}</td>
         <td>{{arr.firstName + ' ' + arr.lastName}}</td>
         <td>{{arr.userName}}</td>
         <td>{{arr.contactNo}}</td>
     <!--    <td>{{arr.empId}}</td>-->
         <td>{{arr.role.roleName}}</td>
         <td>{{arr.department.departmentName}}</td>
         <td>
           <i class="fa fa-check" aria-hidden="true" ng-if="arr.active==1" style="color: green;"></i>
           <i class="fa fa-times" aria-hidden="true" ng-if="arr.active!=1" style="color: red;"></i>
         </td>
         <td nowrap>
           <button class="btn btn-info" ng-disabled="arr.role.roleName=='Admin'" ng-click="vm.editUser(arr);">Edit</button>
           <button class="btn btn-info" ng-disabled="arr.role.roleName=='Admin'" ng-click="vm.changeStatus(arr);">Change Status</button>
           <button class="btn btn-success" ng-disabled="arr.role.roleName=='Admin'" ng-click="vm.showLabAssignment(arr);">Labs</button>
           <button class="btn btn-danger" ng-disabled="arr.role.roleName=='Admin'" ng-click="vm.showPopup(arr);">Delete</button>
         </td>
       </tr>
     </tbody>
   </table>
 </div>
