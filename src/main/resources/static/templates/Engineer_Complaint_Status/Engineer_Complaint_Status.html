<style>
.table-bordered tr th, .table-bordered tr td, .table-bordered tr {
    border: 1px solid #ccc !important;
}
.orange { background-color: #008B8B; }
.orange th { color: #fff; }
.navbar {
    background-color: #008B8B;
    padding: 10px 0;
    color: #fff;
    text-align: center;
    text-decoration: none;
}
.btn_serach {
    background-color: #008B8B;
    border: 1px solid #008B8B;
    color: white;
}
.center-button {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}
</style>



<div class="container">
    <div class="row page-title-div">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h2 class="title" style="text-align: center;">Engineer Wise Complaint Status Report</h2>
        </div>
        <div class="col-md-2 col-md-offset-10">
                        <button type="button" class="btn_serach btn-sm" id="success" style="background: #008B8B; border: 1px solid #008B8B; color:white;" ng-click="vm.exportToExcel()">Export</button>
                    </div>
        
    </div><br>

  <div class="row">
        <div class="col-md-6 col-xs-12">
            <div class="form-group">
                <label for="employee">Engineer <span style="color: #c00;">*</span> :</label>
                <select ng-model="vm.selectedEmployee" 
                        ng-options="UserDetails as (UserDetails.firstName + ' ' + UserDetails.lastName) for UserDetails in vm.engineer track by UserDetails.id" 
                        class="form-control" 
                        required 
                        ng-change="vm.generateReport()"> <!-- Call generateReport on change -->
                    <option value="">Select Engineer</option>
                </select>
            </div>
        </div>
    </div>
    
    
    
     <div class="panel-body table-responsive">
        <table datatable="ng" id="engineerReport" class="table table-bordered">
            <thead class="orange">
                <tr>
                    <th>Sr No</th>
                    <th>Ticket No</th>
                    <th>Asset</th>
                    <th>Priority</th>
                    <th>Cause</th>
                    <th>Description</th>
                    <th>Complaint Date</th>
                    <th>Allocate Date</th>
                    <th>In-process Date</th>
                    <th>Closed Date</th>
                    <th>Assigned Engineer</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-if="vm.engineerReport.length === 0">
                    <td colspan="12" class="text-center">No data available.</td>
                </tr>
                <tr ng-repeat="complaint in vm.engineerReport">
                    <td>{{$index + 1}}</td>
                    <td>{{complaint.ticketNo}}</td>
                    <td>{{complaint.assetInventory.machine}} - {{complaint.assetInventory.equipmentId}}</td>
                    <td>{{complaint.priority}}</td>
                    <td>{{complaint.cause}}</td>
                    <td>{{complaint.description}}</td>
                    <td>{{complaint.complaintDate | date:'yyyy-MM-dd'}}</td>
                    <td>{{complaint.allocateDate | date:'yyyy-MM-dd'}}</td>
                    <td>{{complaint.inProcessDate | date:'yyyy-MM-dd'}}</td>
                    <td>{{complaint.closedDate | date:'yyyy-MM-dd'}}</td>
                    <td>{{complaint.allocateTo.firstName}} {{complaint.allocateTo.lastName}}</td>
                    <td>
                        <span ng-switch="complaint.status">
                            <span ng-switch-when="1">Open</span>
                            <span ng-switch-when="2">Allocate</span>
                            <span ng-switch-when="3">In-Process</span>
                            <span ng-switch-when="4">Closed</span>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    

</div>
