

<style>
	

	.custom-modal-overlay {
	    position: fixed;
	    top: 0;
	    left: 0;
	    right: 0;
	    bottom: 0;
	    background: rgba(0,0,0,0.5);
	    z-index: 1000;
	    display: flex;
	    align-items: center;
	    justify-content: center;
	}

	.custom-modal-content {
	    background: #fff;
	    padding: 20px;
	    width: 90%;
	    max-width: 600px;
	    border-radius: 8px;
	    box-shadow: 0 0 15px rgba(0,0,0,0.3);
	    max-height: 80%;
	    overflow-y: auto;
	}

	.custom-modal-header {
	    display: flex;
	    justify-content: space-between;
	    align-items: center;
	    border-bottom: 1px solid #ddd;
	    padding-bottom: 10px;
	    margin-bottom: 15px;
	}

	.custom-modal-header h4 {
	    margin: 0;
	    font-size: 1.2em;
	    color: #333;
	}

	.custom-modal-header button {
	    background: #e74c3c;
	    color: white;
	    border: none;
	    border-radius: 50%;
	    width: 28px;
	    height: 28px;
	    font-weight: bold;
	    cursor: pointer;
	}

	.custom-modal-body {
	    display: flex;
	    flex-direction: column;
	    gap: 12px;
	}

	.image-item {
	    background: #f9f9f9;
	    padding: 10px;
	    border: 1px solid #ddd;
	    border-radius: 6px;
	    display: flex;
	    align-items: center;
	    justify-content: space-between;
	}

	.image-item p {
	    margin: 0;
	    word-break: break-all;
	    flex: 1;
	}

	.image-item button {
	    background: #3498db;
	    color: white;
	    border: none;
	    padding: 6px 10px;
	    border-radius: 4px;
	    cursor: pointer;
	    font-size: 0.9em;
	}

	.image-item button:hover {
	    background: #2980b9;
	}

	.custom-modal-footer {
	    display: flex;
	    justify-content: flex-end;
	    margin-top: 15px;
	}

	.custom-modal-footer button {
	    background: #7f8c8d;
	    color: white;
	    border: none;
	    padding: 8px 14px;
	    border-radius: 4px;
	    cursor: pointer;
	    font-size: 0.9em;
	}

	.custom-modal-footer button:hover {
	    background: #636e72;
	}


	.custom-modal-overlay {
	    position: fixed;
	    top: 0;
	    left: 0;
	    width: 100%;
	    height: 100%;
	    background: rgba(0,0,0,0.5);
	    z-index: 9999;
	    display: flex;
	    align-items: center;
	    justify-content: center;
	}

	.custom-modal-content {
	    background: #fff;
	    padding: 20px;
	    border-radius: 6px;
	    width: 400px;
	    max-width: 90%;
	    box-shadow: 0 0 10px rgba(0,0,0,0.3);
	    animation: fadeIn 0.2s ease-in-out;
	}

	.custom-modal-header, .custom-modal-footer {
	    display: flex;
	    justify-content: space-between;
	    align-items: center;
	}

	.custom-modal-header h4 {
	    margin: 0;
	}

	.custom-modal-body {
	    margin: 15px 0;
	}
</style>


<div class="container-fluid" style="padding-top:5px;">
    		
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <h2 class="title" style="text-align:center;">Overall Total Breakdown</h2>
    </div>
    
	

	<!--view images modal-->

	<div class="custom-modal-overlay" ng-show="vm.showImagesModal">
	    <div class="custom-modal-content">
	        <div class="custom-modal-header">
	            <h4>Images for Maint ID: {{ vm.selectedMaintIdForImages }}</h4>
	            <button type="button" ng-click="vm.showImagesModal = false">&times;</button>
	        </div>
	        <div class="custom-modal-body">
	            <div ng-if="vm.selectedMaintImages.length > 0">
	                <div ng-repeat="img in vm.selectedMaintImages" class="image-item">
	                    <p>{{ img.fileName }}</p>
						<button ng-click="vm.downloadMaintImage(img.id)">
						    Download
						</button>

	                </div>
	            </div>
	            <div ng-if="vm.selectedMaintImages.length === 0">
	                <p>No images found for this maintenance.</p>
	            </div>
	        </div>
	        <div class="custom-modal-footer">
	            <button ng-click="vm.showImagesModal = false">Close</button>
	        </div>
	    </div>
	</div>
	<!--/////-->

     <div class="row">
     <div class="col-md-4"></div> 
    <div class="col-md-2">
        <label for="fromDate">From Date</label>
        <input type="date" id="fromDate" ng-model="vm.fromDate" class="form-control" >
    </div>
    <div class="col-md-2">
        <label for="toDate">To Date</label>
        <input type="date" id="toDate" ng-model="vm.toDate" class="form-control" ng-change="vm.filterComplaints()">
    </div>
</div>
	
</div>
		
<div class="row">

	
	<div class="col-md-8">
		</div>
	 <div class="col-md-1" >
                    <button type="button" class="btn_serach" id="success"
                        style="background: #008B8B; border: 1px solid #103e57; color:white;"
                        ng-click="vm.exportToExcel()">Export</button>
                        
                </div>
</div>
		<div class="container">				
						<div class="panel-body table-responsive">
					<table datatable="ng" id="example" class="table table-bordered " 							style="background-color:#008B8B;">
						<thead class="orange">
							<tr>
								<th>Sr.No</th>
						    	<th>Slip Number</th>
							
								
								
								<th>Machine</th>
								<th>Breakdown Description</th>
								<th>Root Cause</th>
								<th>Corrective Action </th>
								<th>Raised Date</th>
								<th>Trial Date</th>
								<th>Closed Date</th>
										
			
								<th>Status</th>
								
								<th>Action</th>
								
							
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="breakdownupdate in vm.filteredComplaints">
							
								<td>{{$index+1}}</td>
								<td>{{breakdownupdate.bd_slip}}</td>		
							
							

					
					<td>{{breakdownupdate.machine.machine_name}} - {{breakdownupdate.machine.eqid}} </td>
					<td>{{breakdownupdate.observation}}</td>
					<td>{{breakdownupdate.root_cause}}</td>
					<td>{{breakdownupdate.action_taken}}</td>
					<td>{{breakdownupdate.ticket_raised_time | date:'dd-MM-yyyy'}}</td>
					<td>{{breakdownupdate.ticket_trial_time | date:'dd-MM-yyyy'}}</td>
					<td>{{breakdownupdate.ticket_closed_time | date:'dd-MM-yyyy'}}</td>
					
				
					
					 <td>
			                        <span ng-switch="breakdownupdate.status">
			                            <span ng-switch-when="1">Open</span>
			                            <span ng-switch-when="2">Trial</span>
			                            <span ng-switch-when="3">Closed</span>
			                          
			                        </span>
			                    </td>
												
								
								
								<td>
									

													        <button class="btn btn-warning btn-sm"
													            ng-click="vm.getMaintImages(breakdownupdate.breakdown_id)">
													            View Images
													        </button>
															</td>
								
								
								
								
							</tr>
						</tbody>
					</table>
				</div>
					
	</div>				
 	
 

 
 
	<script src="templates/views/js/bootstrap/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>