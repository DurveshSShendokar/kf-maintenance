<style>
	.table-bordered tr th,
	.table-bordered tr td,
	.table-bordered tr {
		border: 1px solid #ccc !important;
	}

	 .orange {
		background-color: #008b8b;
	}

	.orange {
		background-color: #008B8B;
	}

	 .orange th {
		color: #fff;
	}
	
	.highlight-green {
	    background-color: #d4edda !important; /* light green */
	}
	.highlight-green.danger-row {
	    background-image: linear-gradient(to right, #d4edda, #f8d7da);
	}

	.danger-row {
	    background-color: #f8d7da !important; 
	    color: #721c24; 
	}
	
	.highlight-danger {
	       background-color: #ffcccc !important; /* Light red */
	   }

	navbar {
		background-color: #008B8B;
		padding: 10px 0;
		color: #fff;
		text-align: center;
		text-decoration: none;
	}
	
	

	.custom-modal-overlay {
	    position: fixed;
	    top: 0;
	    left: 0;
	    right: 0;
	    bottom: 0;
	    background: rgba(0,0,0,0.5);
	    z-index: 1000;
	    display: flex;
	    align-items: center;
	    justify-content: center;
	}

	.custom-modal-content {
	    background: #fff;
	    padding: 20px;
	    width: 90%;
	    max-width: 600px;
	    border-radius: 8px;
	    box-shadow: 0 0 15px rgba(0,0,0,0.3);
	    max-height: 80%;
	    overflow-y: auto;
	}

	.custom-modal-header {
	    display: flex;
	    justify-content: space-between;
	    align-items: center;
	    border-bottom: 1px solid #ddd;
	    padding-bottom: 10px;
	    margin-bottom: 15px;
	}

	.custom-modal-header h4 {
	    margin: 0;
	    font-size: 1.2em;
	    color: #333;
	}

	.custom-modal-header button {
	    background: #e74c3c;
	    color: white;
	    border: none;
	    border-radius: 50%;
	    width: 28px;
	    height: 28px;
	    font-weight: bold;
	    cursor: pointer;
	}

	.custom-modal-body {
	    display: flex;
	    flex-direction: column;
	    gap: 12px;
	}

	.image-item {
	    background: #f9f9f9;
	    padding: 10px;
	    border: 1px solid #ddd;
	    border-radius: 6px;
	    display: flex;
	    align-items: center;
	    justify-content: space-between;
	}

	.image-item p {
	    margin: 0;
	    word-break: break-all;
	    flex: 1;
	}

	.image-item button {
	    background: #3498db;
	    color: white;
	    border: none;
	    padding: 6px 10px;
	    border-radius: 4px;
	    cursor: pointer;
	    font-size: 0.9em;
	}

	.image-item button:hover {
	    background: #2980b9;
	}

	.custom-modal-footer {
	    display: flex;
	    justify-content: flex-end;
	    margin-top: 15px;
	}

	.custom-modal-footer button {
	    background: #7f8c8d;
	    color: white;
	    border: none;
	    padding: 8px 14px;
	    border-radius: 4px;
	    cursor: pointer;
	    font-size: 0.9em;
	}

	.custom-modal-footer button:hover {
	    background: #636e72;
	}


	.custom-modal-overlay {
	    position: fixed;
	    top: 0;
	    left: 0;
	    width: 100%;
	    height: 100%;
	    background: rgba(0,0,0,0.5);
	    z-index: 9999;
	    display: flex;
	    align-items: center;
	    justify-content: center;
	}

	.custom-modal-content {
	    background: #fff;
	    padding: 20px;
	    border-radius: 6px;
	    width: 400px;
	    max-width: 90%;
	    box-shadow: 0 0 10px rgba(0,0,0,0.3);
	    animation: fadeIn 0.2s ease-in-out;
	}

	.custom-modal-header, .custom-modal-footer {
	    display: flex;
	    justify-content: space-between;
	    align-items: center;
	}

	.custom-modal-header h4 {
	    margin: 0;
	}

	.custom-modal-body {
	    margin: 15px 0;
	}
	
	
</style>
<div class="container-fluid" style="padding-top:5px;">

	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
		<h2 class="title" style="text-align:center;">Total Closed Maintenance</h2>
	</div>
	
	 <div class="row">
     <div class="col-md-4"></div> 
    <div class="col-md-2">
        <label for="fromDate">From Date</label>
        <input type="date" id="fromDate" ng-model="vm.fromDate" class="form-control" >
    </div>
	<div class="col-md-2">
	       <label for="toDate">To Date</label>
	       <input type="date" id="toDate" ng-model="vm.toDate" class="form-control">
	   </div>
	   <div class="col-md-2" style="margin-top: 25px;">
	       <button class="btn btn-primary" ng-click="vm.filterComplaints()">Filter</button>
	   </div>
</div>
	
	
</div>
<div class="row">

	<div class="col-md-8">
	</div>
	
		
	 <div class="col-md-1" >
                    <button type="button" class="btn_serach" id="success"
                        style="background: #008B8B; border: 1px solid #103e57; color:white;"
                        ng-click="vm.exportToExcel()">Export</button>
                        
                </div>
</div>


<!--view images modal-->

<div class="custom-modal-overlay" ng-show="vm.showImagesModal">
    <div class="custom-modal-content">
        <div class="custom-modal-header">
            <h4>Images for Maint ID: {{ vm.selectedMaintIdForImages }}</h4>
            <button type="button" ng-click="vm.showImagesModal = false">&times;</button>
        </div>
        <div class="custom-modal-body">
            <div ng-if="vm.selectedMaintImages.length > 0">
                <div ng-repeat="img in vm.selectedMaintImages" class="image-item">
                    <p>{{ img.fileName }}</p>
					<button ng-click="vm.downloadMaintImage(img.id)">
					    Download
					</button>

                </div>
            </div>
            <div ng-if="vm.selectedMaintImages.length === 0">
                <p>No images found for this maintenance.</p>
            </div>
        </div>
        <div class="custom-modal-footer">
            <button ng-click="vm.showImagesModal = false">Close</button>
        </div>
    </div>
</div>


<div class="container">
		    <div class="row top">
		        <div class="col-sm-12">
		
		
		 <div class="row form-border" ng-show="addNewTab">
		            
						<div class="row">
									
									
									
								<div style="margin-top: 3%;width: 100%">
										
									<div class="col-sm-12">
											
										
										
										<div class="row">
											
											<div class="col-sm-2">
											</div>
											
											<div class="col-sm-2" style="margin-left:-3%">
												<p class="control-label" style="text-align:center;font-weight:600;text-transform: uppercase;">Equipment :</p>
											</div>
											
											<div class="col-sm-6">
												<input type="text" class="form-control" ng-disabled="true" ng-model="equipment" name="equipment" id="equipment">

											</div>
											
											<div class="col-sm-2">
											</div>
											
										</div>
										
									</div>
										
							   </div>
							</div>
		            
							<div class="col-sm-12">
								<table id="assembly_list_QR" datatable="ng" class="table table-bordered margin-tb" style="width:100%">
								    <thead>
								        <tr class="orange">
								            <th class="dark-cyan-bg">#</th>
								            <th class="dark-cyan-bg">Checklist</th>
								            <th class="dark-cyan-bg">Acceptable Range</th> 
								            <th class="dark-cyan-bg">Value</th>
								        </tr>
								    </thead>
								    <tbody>
										<tr ng-repeat="arr in vm.loadChecklist"
										    ng-class="{
										        'danger-row': isOutOfRangeCheckpoint(arr),
										        'highlight-green': arr.previousBit == 1
										    }"
											 ng-attr-title="{{arr.previousBit == 1 ? 'Previous PPM checklist' : undefined}}">
											 
								            <td>{{$index + 1}}</td>
								            <td>{{arr.task}}</td>                         
								            <td>{{arr.acceptableRange}}</td>                         
								            <td>{{arr.status}}
												
												<span ng-if="isOutOfRangeCheckpoint(arr)" title="Out of range detected">
												                   <i class="fa fa-exclamation-circle text-danger" aria-hidden="true"></i>
												               </span>
												
											</td>
								        </tr>
								    </tbody>
								</table>

							
										 
									     
										 
										 <div class="row right create-break margin-tb">
										 						     	<div class="col-sm-8">
										 						     		<button class="btn btn-primary" ng-click="vm.cancel()">cancel</button>
										 						     	</div>
										 								
										 						     </div>
										 
						</div>
								
							
		              
		                
		                
						
		            </div>
		        </div>
		    </div>
		</div>

		
		
		




<div class="container">
	<div class="panel-body table-responsive">
		<table datatable="ng" id="example" class="table table-bordered " style="background-color:#008B8B;">
			<thead class="orange">
				<tr>
					<th>Sr.No</th>
					<th>Machine Name</th>
					<th>Machine ID</th>
					<th>Location</th>

					<th>Frequency</th>
					
					<th>lab</th>
					<th>PPM Status</th>
					<th>Done By</th>
					<th>Overall Status</th>
					
					<th>Schedule Date</th>
					<th>Closed Date</th>
					<th>Action</th>



				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="maint in vm.filteredComplaints"
				    ng-class="isOutOfRange(maint) ? 'highlight-danger' : ''">




					<td>{{$index+1}}</td>
					<td>{{maint.machine.machine_name}} </td>
					<td>{{maint.machine.eqid}}</td>
					<td>{{maint.machine.location}}</td>
					<td>{{maint.frequency}}</td>
					<td>{{maint.lab.labName}}</td>
					<td>{{ getPPMStatus(maint) }}</td>
					<td>{{maint.done_by.firstName}} {{maint.done_by.lastName}}</td>
					<td>{{maint.overall_status}}</td>
					
					<td>{{maint.schedule_date| date : 'dd-MM-yyyy : hh:mm a'}}</td>
					<td>{{maint.closedDate	| date : 'dd-MM-yyyy : hh:mm a'}}</td>


					<td class="text-nowrap">
					    <button type="button" class="btn btn-info" title="View" ng-click="vm.add(maint)">
					        <i class="fa fa-eye" aria-hidden="true"></i>
					    </button>
					    <span ng-if="isOutOfRange(maint)" title="Out of range detected">
					        <i class="fa fa-exclamation-circle text-danger" aria-hidden="true"></i>
					    </span>
						
						<button class="btn btn-warning btn-sm"
																		            ng-click="vm.getMaintImages(maint.maint_id)">
																		            View Images
																		        </button>
					</td>




				</tr>
			</tbody>
		</table>
	</div>

</div>